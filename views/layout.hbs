<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>devault</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" />
  <link href='/stylesheets/style.css' rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
  <link rel="shortcut icon" type="image/png" href="https://i.imgur.com/PedNfwz.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
  <div><button class="btn-toggle"><i class='bx bx-moon' ></i></button></div>
  <nav id="nav-menu">
    <ul class="nav__list">
      {{#if user}}
      <li class="nav__item">
        <a href="/" class="nav__link active-link">
          <i class='bx bx-home-alt-2 nav__icon' ></i>
          <span class="nav__name">Home</span>
        </a>
      </li>
        <li class="nav__item">
        <a href="/tools/discover" class="nav__link active-link">
          <i class='bx bx-compass nav__icon'></i>
          <span class="nav__name">Discover</span>
        </a>
      </li>
      <li class="nav__item">
        <a href="/tools/new" class="nav__link active-link">
          <i class='bx bxs-plus-circle nav__icon' id="addbtn"></i>
          <span class="nav__name">Add</span>
        </a>
      </li>
      <li class="nav__item">
        <a href="/lists" class="nav__link active-link">
          <i class='bx bx-library nav__icon'></i> 
          <span class="nav__name">Library</span>
        </a>
      </li>
       <li>
        <a href="/profile" class="nav__link active-link">
          <img src={{user.image}} class='bx bx-cog nav__icon' alt="avatar" style="width: 35px; border-radius: 20px;"> 
          <span class="nav__name">Profile</span>
        </a>
      </li>
      {{else}}    
      <li class="nav__item">
        <a href="/" class="nav__link active-link">
          <i class='bx bx-home-alt-2 nav__icon' ></i>
          <span class="nav__name">Home</span>
        </a>
      </li>
      <li class="nav__item">
        <a href="/tools/discover" class="nav__link active-link">
          <i class='bx bx-compass nav__icon' ></i>
          <span class="nav__name">Discover</span>
        </a>
      </li>
      <li class="nav__item">
        <a href="/tools/new" class="nav__link active-link">
          <i class='bx bx-plus-medical nav__icon' id="addbtn"></i>
          <span class="nav__name">Add</span>
        </a>
      </li>
       <li class="nav__item">
        <a href="/auth/login" class="nav__link active-link">
          <i class='bx bx-log-in-circle nav__icon' ></i>
          <span class="nav__name">Login</span>
        </a>
      </li>
      {{/if}}
    </ul>
  </nav>
    {{{ body }}}
    <script>
              {{!-- NAVBAR SHADOWN ON SCROLL --}}
      const navBar = document.getElementById('nav-menu');
      window.onscroll = function(){
        if (window.scrollY >22){
          navBar.classList.add('scrolled')
        }else{
          navBar.classList.remove('scrolled')
        }
      }
      {{!-- DARK MODE SETTINGS --}}
      const btn = document.querySelector(".btn-toggle");
const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");

const currentTheme = localStorage.getItem("theme");
if (currentTheme == "dark") {
  document.body.classList.toggle("dark-theme");
} else if (currentTheme == "light") {
  document.body.classList.toggle("light-theme");
}
          {{!-- DARK MODE SCRIPT --}}
btn.addEventListener("click", function () {
  if (prefersDarkScheme.matches) {
    document.body.classList.toggle("light-theme");
    var theme = document.body.classList.contains("light-theme")
      ? "light"
      : "dark";
  } else {
    document.body.classList.toggle("dark-theme");
    var theme = document.body.classList.contains("dark-theme")
      ? "dark"
      : "light";
  }

  document.querySelectorAll(".nav, .btn, .card-container").forEach(function (el) {
    el.classList.remove("light-theme");
    el.classList.remove("dark-theme");
    el.classList.add(theme + "-theme");
  });

  localStorage.setItem("theme", theme);
});
$('option').mousedown(function(e) {
    e.preventDefault();
    var originalScrollTop = $(this).parent().scrollTop();
    console.log(originalScrollTop);
    $(this).prop('selected', $(this).prop('selected') ? false : true);
    var self = this;
    $(this).parent().focus();
    setTimeout(function() {
        $(self).parent().scrollTop(originalScrollTop);
    }, 0);
    
    return false;
});
    </script>
    <script>
    const input = document.getElementById("file-upload")
    const output = document.querySelector("file-upload")
    let imagesArray = []
      input.addEventListener("change", () => {
        const file = input.files
        imagesArray.push(file[0])
        displayImages()
      })
      function displayImages() {
        let images = ""
        imagesArray.forEach((image, index) => {
          images += `<div class="image">
                      <img src="${URL.createObjectURL(image)}" alt="image">
                      <span onclick="deleteImage(${index})">&times;</span>
                    </div>`
        })
        output.innerHTML = images
      }
      function deleteImage(index) {
        imagesArray.splice(index, 1)
        displayImages()
      }
    </script> 
</body>
</html>

